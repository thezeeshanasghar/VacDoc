<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>Fill Child vaccine</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class=ion-padding>

  <form [formGroup]="fg">
    <div *ngIf="Type!=='travel'">
    <ion-item>
      <ion-label color="primary" position="floating">Weight</ion-label>
      <ion-input type="text" placeholder="Weight" formControlName="Weight"></ion-input>
      <ion-text color="danger" *ngIf="fg.get('Weight').invalid && (fg.get('Weight').dirty || fg.get('Weight').touched)" style="font-size: 13px; position: absolute; right: 0; top: 50%; transform: translateY(-50%);">
        <ng-container *ngIf="fg.get('Weight').errors.required">
          Weight is required
        </ng-container>
        <ng-container *ngIf="fg.get('Weight').errors.pattern">
          Only numbers are allowed for Weight
        </ng-container>
      </ion-text>
      <ion-text color="success" *ngIf="fg.get('Weight').valid && (fg.get('Weight').dirty || fg.get('Weight').touched)" style="font-size: 13px; position: absolute; right: 0; top: 50%; transform: translateY(-50%);">
        <ion-icon name="checkmark-circle-outline" style="margin-right: 12px; font-size: 25px;"></ion-icon> <!-- Use the name of the desired icon -->
      </ion-text>
      
    </ion-item>
    <ion-item>
      <ion-label color="primary" position="floating">Height</ion-label>
      <ion-input type="text" placeholder="Height" formControlName="Height"></ion-input>
      <ion-text color="danger" *ngIf="fg.get('Height').invalid && (fg.get('Height').dirty || fg.get('Height').touched)" style="font-size: 13px; position: absolute; right: 0; top: 50%; transform: translateY(-50%);">
        <ng-container *ngIf="fg.get('Height').errors.required">
          Height is required
        </ng-container>
        <ng-container *ngIf="fg.get('Height').errors.pattern">
          Only numbers are allowed for Height
        </ng-container>
      </ion-text>
      <ion-text color="success" *ngIf="fg.get('Height').valid && (fg.get('Height').dirty || fg.get('Height').touched)" style="font-size: 13px; position: absolute; right: 0; top: 50%; transform: translateY(-50%);">
        <ion-icon name="checkmark-circle-outline" style="margin-right: 12px; font-size: 25px;"></ion-icon> <!-- Use the name of the desired icon -->
      </ion-text>
    </ion-item>
    <ion-item>
      <ion-label color="primary" position="floating">OFC</ion-label>
      <ion-input type="text" placeholder="OFC" formControlName="Circle"></ion-input>
      <ion-text color="danger" *ngIf="fg.get('Circle').invalid && (fg.get('Circle').dirty || fg.get('Circle').touched)" style="font-size: 13px; position: absolute; right: 0; top: 50%; transform: translateY(-50%);">
        <ng-container *ngIf="fg.get('Circle').errors.required">
          OFC is required
        </ng-container>
        <ng-container *ngIf="fg.get('Circle').errors.pattern">
          Only numbers are allowed for OFC
        </ng-container>
      </ion-text>
      <ion-text color="success" *ngIf="fg.get('Circle').valid && (fg.get('Circle').dirty || fg.get('Circle').touched)" style="font-size: 13px; position: absolute; right: 0; top: 50%; transform: translateY(-50%);">
        <ion-icon name="checkmark-circle-outline" style="margin-right: 12px; font-size: 25px;"></ion-icon> <!-- Use the name of the desired icon -->
      </ion-text>
    </ion-item>
  </div>
  <div *ngIf="Type === 'travel'">
    <ion-item>
      <ion-label color="primary" position="floating">Manufacturer</ion-label>
      <ion-input type="text" placeholder="Manufacturer" formControlName="Manufacturer"></ion-input>
      <ion-text color="danger" *ngIf="fg.get('Manufacturer').invalid && (fg.get('Manufacturer').dirty || fg.get('Manufacturer').touched)" style="font-size: 13px; position: absolute; right: 0; top: 50%; transform: translateY(-50%);">
        <ng-container *ngIf="fg.get('Manufacturer').errors.required">
          Manufacturer is required
        </ng-container>
      </ion-text>
      <ion-text color="success" *ngIf="fg.get('Manufacturer').valid && (fg.get('Manufacturer').dirty || fg.get('Manufacturer').touched)" style="font-size: 13px; position: absolute; right: 0; top: 50%; transform: translateY(-50%);">
        <ion-icon name="checkmark-circle-outline" style="margin-right: 12px; font-size: 25px;"></ion-icon>
      </ion-text>
    </ion-item>
  
    <ion-item>
      <ion-label color="primary" position="floating">Batch/Lot</ion-label>
      <ion-input type="text" placeholder="Lot" formControlName="Lot"></ion-input>
      <ion-text color="danger" *ngIf="fg.get('Lot').invalid && (fg.get('Lot').dirty || fg.get('Lot').touched)" style="font-size: 13px; position: absolute; right: 0; top: 50%; transform: translateY(-50%);">
        <ng-container *ngIf="fg.get('Lot').errors.required">
          Batch/Lot is required
        </ng-container>
      </ion-text>
      <ion-text color="success" *ngIf="fg.get('Lot').valid && (fg.get('Lot').dirty || fg.get('Lot').touched)" style="font-size: 13px; position: absolute; right: 0; top: 50%; transform: translateY(-50%);">
        <ion-icon name="checkmark-circle-outline" style="margin-right: 12px; font-size: 25px;"></ion-icon>
      </ion-text>
    </ion-item>

    <ion-item (click)="expiryPicker.open()">
      <ion-label color="primary">Expiry</ion-label>
      <input formControlName="Expiry" matInput [matDatepicker]="expiryPicker" [value]="todaydate">
      <mat-datepicker-toggle matSuffix [for]="expiryPicker"></mat-datepicker-toggle>
      <mat-datepicker #expiryPicker></mat-datepicker>
      <ion-text color="danger"
        *ngIf="fg.get('Expiry')?.invalid && (fg.get('Expiry').dirty || fg.get('Expiry').touched)"
        style="font-size: 13px; position: absolute; right: 0; top: 50%; transform: translateY(-50%);">
        <ng-container *ngIf="fg.get('Expiry')?.errors.required">
          Expiry is required
        </ng-container>
      </ion-text>
    </ion-item>
    
    <ion-item (click)="validityPicker.open()">
      <ion-label color="primary">Validity</ion-label>
      <input formControlName="Validity" matInput [matDatepicker]="validityPicker" [value]="todaydate">
      <mat-datepicker-toggle matSuffix [for]="validityPicker"></mat-datepicker-toggle>
      <mat-datepicker #validityPicker></mat-datepicker>
      <ion-text color="danger"
        *ngIf="fg.get('Validity')?.invalid && (fg.get('Validity').dirty || fg.get('Validity').touched)"
        style="font-size: 13px; position: absolute; right: 0; top: 50%; transform: translateY(-50%);">
        <ng-container *ngIf="fg.get('Validity')?.errors.required">
          Validity is required
        </ng-container>
      </ion-text>
    </ion-item>
    
  </div>
      
    
    
    <!-- <ion-item>
      <ion-label color="primary" position="floating">Disease</ion-label>
      <ion-input type="text" placeholder="Disease" ></ion-input>
    </ion-item> -->
    <!--  -->

    <ion-item *ngIf="vaccineName === 'Hepatitis A' || vaccineName === 'Chicken Pox'">
      <ion-label color="primary">Disease</ion-label>
      <ion-checkbox formControlName="IsDisease"></ion-checkbox>
    </ion-item>

    <ion-item *ngIf="fg.value.IsDisease">
      <ion-label color="primary">Disease Year</ion-label>
      <ion-datetime picker-format="YYYY" displayFormat="YYYY" value="{{Date}}" formControlName="DiseaseYear"
        min="{{birthYear}}" max="{{todaydate}}"></ion-datetime>
    </ion-item>

    
    <!-- <ion-item *ngIf="!fg.value.IsDisease">
      <ion-label color="primary">Brands</ion-label>
      <ion-select formControlName="BrandId">
        <ion-select-option *ngFor="let user of brandName" [value]="user.Id">{{user.Name}}</ion-select-option>
      </ion-select>
    </ion-item> -->
    <ion-item *ngIf="!fg.value.IsDisease">
      <ion-label color="primary">Brands</ion-label>
      <ion-select formControlName="BrandId" [interfaceOptions]="customActionSheetOptions" interface="action-sheet" placeholder="Select Brand">
        <ion-select-option value="OHF">OHF</ion-select-option>
        <ion-select-option *ngFor="let user of brandName" [value]="user.Id">{{ user.Name }}</ion-select-option>
      </ion-select>
    </ion-item>
    
    
    <ion-item>
      <ion-label>Schedule Date</ion-label>
      <ion-datetime disabled displayFormat="DD-MM-YYYY" value="{{Date}}"></ion-datetime>
    </ion-item>

    <ion-item *ngIf="!fg.value.IsDisease" (click)="picker.open()">
      <!-- <ion-datetime  picker-format="DD-MM-YYYY" value="{{Date}}" formControlName="GivenDate" max = "{{todaydate}}"></ion-datetime> -->
      <!-- <mat-form-field appearance="fill"> -->
      <!-- <mat-label>Choose a date</mat-label> -->
      <ion-label color="primary">Given Date</ion-label>
      <input formControlName="GivenDate" matInput [matDatepicker]="picker" value="{{Date}}" max="{{todaydate}}">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker disabled="false"></mat-datepicker>
      <!-- </mat-form-field> -->
    </ion-item>

    <!-- <ion-button (click)="fillVaccine()">Submit</ion-button> -->

    <ion-button [disabled]="!isBrandFilled() || isScheduleDateValid()" (click)="fillVaccine()">Submit</ion-button>
  </form>
</ion-content>