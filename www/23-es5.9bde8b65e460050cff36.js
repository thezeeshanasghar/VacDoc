function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),l=new P(r||[]);return o(a,"_invoke",{value:x(e,n,l)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="executing",p="completed",b={};function g(){}function m(){}function v(){}var y={};c(y,a,(function(){return this}));var D=Object.getPrototypeOf,S=D&&D(D(O([])));S&&S!==n&&r.call(S,a)&&(y=S);var w=v.prototype=g.prototype=Object.create(y);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,i,a,l){var s=h(e[o],e,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function x(t,n,r){var o=d;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=C(l,r);if(s){if(s===b)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var c=h(t,n,r);if("normal"===c.type){if(o=r.done?p:"suspendedYield",c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=p,r.method="throw",r.arg=c.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return m.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:m,configurable:!0}),m.displayName=c(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},k(_.prototype),c(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(w),c(w,s,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _callSuper(e,t,n){return t=_getPrototypeOf(t),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(t,n||[],_getPrototypeOf(e).constructor):t.apply(e,n))}function _possibleConstructorReturn(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{QqES:function(e,t,n){"use strict";n.r(t);var r,o=n("8Y7J"),i=n("mrSG"),a=n("Do2H"),l=n("AytR"),s=n("lJxs"),c=n("JIr8"),u=n("IheW"),h=((r=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_callSuper(this,t,[e])).http=e,n.API_ALERT=l.a.BASE_URL+"schedule/",n}return _inherits(t,e),_createClass(t,[{key:"getChild",value:function(e,t,n){var r="".concat(this.API_ALERT,"alert/").concat(t,"/").concat(n,"?inputDate=").concat(e);return console.log("API URL:",r),this.http.get(r,this.httpOptions).pipe(Object(s.a)(this.extractData),Object(c.a)(this.handleError))}},{key:"sendAlertMsgToAll",value:function(e,t){return this.http.get("".concat(this.API_ALERT,"alert/sms-alert/").concat(e,"/").concat(t),this.httpOptions).pipe(Object(s.a)(this.extractData),Object(c.a)(this.handleError))}},{key:"sendEmailToAll",value:function(e,t){return this.http.get("".concat(this.API_ALERT,"alert2/").concat(e,"/").concat(t),this.httpOptions).pipe(Object(s.a)(this.extractData),Object(c.a)(this.handleError))}},{key:"sendEmailSingle",value:function(e){return this.http.get("".concat(this.API_ALERT,"alertone/").concat(e),this.httpOptions).pipe(Object(s.a)(this.extractData),Object(c.a)(this.handleError))}},{key:"sendIndividualAlertMsg",value:function(e,t){return this.http.get("".concat(this.API_ALERT,"alert/individual-sms-alert/").concat(e,"/").concat(t),this.httpOptions).pipe(Object(s.a)(this.extractData),Object(c.a)(this.handleError))}},{key:"sendMsgsThroughDictionary",value:function(e,t){return this.http.get("".concat(this.API_ALERT,"alert/send-msg/").concat(e,"/").concat(t),this.httpOptions).pipe(Object(s.a)(this.extractData),Object(c.a)(this.handleError))}}])}(a.a)).ngInjectableDef=o.Rb({factory:function(){return new r(o.Sb(u.c))},token:r,providedIn:"root"}),r),d=n("UXh4"),f=n("4zgz"),p=n("hnS/"),b=n("6oYy"),g=n("Tw+x"),m=n("3trs"),v=n("pR0E"),y=function(){return _createClass((function e(t,n,r,o,i,a,s,c,u,h,d,f){_classCallCheck(this,e),this.loadingController=t,this.alertService=n,this.doctorService=r,this.toastService=o,this.storage=i,this.androidPermissions=a,this.callNumber=s,this.titlecasePipe=c,this.sms=u,this.downloader=h,this.platform=d,this.vaccineService=f,this.API_VACCINE=""+l.a.BASE_URL,this.Messages=[],this.numOfDays=0,this.selectedDate=(new Date).toISOString()}),[{key:"ngOnInit",value:function(){return i.a(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var t,n=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.getAlerts(this.selectedDate),e.next=3,this.storage.get(l.a.DOCTOR_Id).then((function(e){n.doctorId=e}));case 3:return e.next=5,this.storage.get(l.a.CLINIC_Id).then((function(e){n.clinicId=e}));case 5:return e.next=7,this.storage.get(l.a.SMS).then((function(e){n.SMSKey=e}));case 7:return this.storage.get(l.a.MESSAGES).then((function(e){null!=e&&(n.Messages=e)})),t=this.formatDateToString(this.selectedDate),this.getAlerts(t),e.next=12,this.getChlid(this.numOfDays,t);case 12:return e.next=14,this.getdoctor();case 14:case"end":return e.stop()}}),e,this)})))}},{key:"getdoctor",value:function(){return i.a(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var t=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.getItem("docid"),e.next=3,this.doctorService.getDoctorProfile(this.doctorId).subscribe((function(e){if(e.IsSuccess){var n=e.ResponseData;console.log("Doctor Data is ",e.ResponseData),console.log("Doctor ID:",n.Id),console.log("Doctor Name:",n.DisplayName),console.log("Doctor Email:",n.Email),console.log("Doctor Phone:",n.Phone),console.log("Doctor Specialization:",n.Specialization),console.log("Doctor Address:",n.Address),t.displayName=n.DisplayName,n.Clinics&&n.Clinics.length>0?(n.Clinics.forEach((function(e,t){console.log("Clinic ".concat(t+1," Data:")),console.log("Clinic ID:",e.Id),console.log("Clinic Name:",e.Name),console.log("Clinic Address:",e.Address),console.log("Clinic Phone:",e.PhoneNumber),console.log("Clinic Email:",e.Email),e.Staff&&e.Staff.length>0&&(console.log("Clinic ".concat(t+1," Staff:")),e.Staff.forEach((function(e,t){console.log("Staff Member ".concat(t+1,":"),e.Name)}))),console.log("-------------------")})),t.clinicName=n.Clinics[0].Name,t.clinicPhoneNumber=n.Clinics[0].PhoneNumber):console.log("No clinic data available")}else console.log("Failed to get doctor data")}),(function(e){console.error("Error fetching doctor data:",e),t.toastService.create(e,"danger")}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getChlid",value:function(e,t){return i.a(this,void 0,void 0,_regeneratorRuntime().mark((function n(){var r,o=this;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.numOfDays=e,this.formattedDate=t,n.next=3,this.loadingController.create({message:"Loading"});case 3:return r=n.sent,n.next=6,r.present();case 6:return n.next=8,this.alertService.getChild(this.formattedDate,this.numOfDays,this.clinicId).subscribe((function(e){e.IsSuccess?(o.Childs="",o.Childs=e.ResponseData,r.dismiss()):(r.dismiss(),o.toastService.create(e.Message,"danger"))}),(function(e){r.dismiss(),o.toastService.create(e,"danger")}));case 8:case"end":return n.stop()}}),n,this)})))}},{key:"sendemails",value:function(){return i.a(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var t,n=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({message:"sending emails"});case 2:return t=e.sent,e.next=5,t.present();case 5:return e.next=7,this.alertService.sendEmailToAll(this.numOfDays,this.clinicId).subscribe((function(e){e.IsSuccess?(t.dismiss(),n.toastService.create("emails sent successfull","success")):(t.dismiss(),n.toastService.create(e.Message,"danger"))}),(function(e){t.dismiss(),n.toastService.create(e,"danger")}));case 7:case"end":return e.stop()}}),e,this)})))}},{key:"sendemail",value:function(e){return i.a(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r=this;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),console.log(e[0].ChildId),t.next=3,this.loadingController.create({message:"sending email"});case 3:return n=t.sent,t.next=6,n.present();case 6:return t.next=8,this.alertService.sendEmailSingle(e[0].ChildId).subscribe((function(e){e.IsSuccess?(n.dismiss(),r.toastService.create("email sent successfully","success")):(n.dismiss(),r.toastService.create(e.Message,"danger"))}),(function(e){n.dismiss(),r.toastService.create(e,"danger")}));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"downloadcsv",value:function(){var e="";this.Childs.map((function(e){return e.Child.Id})).forEach((function(t){e+="arr[]="+t+"&"})),this.platform.is("desktop")||this.platform.is("mobileweb")?window.open("".concat(this.API_VACCINE,"child/downloadcsv?").concat(e)):this.downloader.download({uri:"".concat(this.API_VACCINE,"child/downloadcsv?").concat(e),title:"Child Alerts CSV",description:"",mimeType:"",visibleInDownloadsUi:!0,notificationVisibility:g.b.VisibleNotifyCompleted,destinationInExternalFilesDir:{dirType:"Downloads",subPath:"Child Alerts.csv"}}).then((function(e){return console.log("File downloaded at:"+e)})).catch((function(e){return console.error(e)}))}},{key:"sendSMS",value:function(e){return i.a(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingController.create({message:"Loading"});case 2:return n=t.sent,t.next=5,n.present();case 5:for(r=0;r<e.length;r++)this.generateSMS(e[r]);n.dismiss();case 7:case"end":return t.stop()}}),t,this)})))}},{key:"generateSMS",value:function(e){var t="Reminder: Vaccination for ";return(t+=e.Child.Name+" is due on "+e.Date)+" ("+e.Dose.Name+" )"}},{key:"sendAlertMsg",value:function(e,t,n){return i.a(this,void 0,void 0,_regeneratorRuntime().mark((function r(){var o=this;return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(0!=this.SMSKey){r.next=5;break}return r.next=3,this.alertService.sendIndividualAlertMsg(this.numOfDays,e).subscribe((function(e){e.IsSuccess?o.toastService.create("Alerts has been sent successfully"):o.toastService.create("Error: Failed to send alert\nTry again","danger",!1,3e3)}),(function(e){o.toastService.create("Error: Server failure","danger",!1,3e3)}));case 3:r.next=6;break;case 5:this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.SEND_SMS).then((function(e){e.hasPermission?o.sendMessage(t,n):o.androidPermissions.requestPermission(o.androidPermissions.PERMISSION.SEND_SMS).then((function(e){o.sendMessage(t,n)}),(function(e){console.error(e)}))}),(function(e){o.androidPermissions.requestPermission(o.androidPermissions.PERMISSION.SEND_SMS).then((function(e){o.sendMessage(t,n)}),(function(e){console.error(e)}))}));case 6:case"end":return r.stop()}}),r,this)})))}},{key:"sendMessage",value:function(e,t){return i.a(this,void 0,void 0,_regeneratorRuntime().mark((function n(){var r=this;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.sms.send("+92"+e,t).then((function(){var n={toNumber:"+92"+e,message:t,created:Date.now(),status:!0};r.Messages.push(n),r.storage.set(l.a.MESSAGES,r.Messages),r.toastService.create("Message Sent Successful")})).catch((function(n){r.toastService.create("Message Sent Failed","danger");var o={toNumber:"+92"+e,message:t,created:Date.now(),status:!1};r.Messages.push(o),r.storage.set(l.a.MESSAGES,r.Messages)}));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"callFunction",value:function(e){var t=e.startsWith("0")?e:"0"+e;this.callNumber.callNumber(t,!0).then((function(e){return console.log("Launched dialer!",e)})).catch((function(e){return console.log("Error launching dialer",e)}))}},{key:"sendMsgsThroughList",value:function(){return i.a(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var t,n,r=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({message:"Loading Messages"});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.next=7,this.alertService.sendMsgsThroughDictionary(0,this.clinicId).subscribe((function(e){e.IsSuccess?(r.toastService.create("Success: Generated messages","success",!1,3e3),t=e.ResponseData,r.sendMessagesToChildren(t),n.dismiss()):(r.toastService.create("Error: Failed to generate messages\nTry Again","danger",!1,6e3),n.dismiss())}),(function(e){r.toastService.create("Error: Server failure","danger",!1,3e3),n.dismiss()}));case 7:case"end":return e.stop()}}),e,this)})))}},{key:"sendMessagesToChildren",value:function(e){return i.a(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r=this;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingController.create({message:"Sending Messages"});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.next=7,e.forEach((function(e){r.sendAlertMsg(e.ChildId,e.MobileNumber,e.SMS)}));case 7:n.dismiss();case 8:case"end":return t.stop()}}),t,this)})))}},{key:"openWhatsApp",value:function(e,t,n,r){var o=this;r.isMessageSent?alert("You have already sent the alert for this child."):(this.vaccineService.getDosesForChild(r.Child.Id,this.formatDateToString(this.selectedDate),this.clinicId).subscribe((function(t){if(t.IsSuccess&&t.ResponseData){var n,i=t.ResponseData.map((function(e){return e.Name})).join(", "),a=encodeURIComponent("Reminder: Vaccination ".concat(i,", of ").concat(r.Child.Name," is due. Please confirm your appointment. Thanks!\n").concat(o.displayName,", ").concat(t.ResponseData[0]&&t.ResponseData[0].Clinic?t.ResponseData[0].Clinic.Name:"Unknown Clinic","\nPhone Number: ").concat(t.ResponseData[0]&&t.ResponseData[0].Clinic?t.ResponseData[0].Clinic.PhoneNumber:"Unknown Phone Number","\nLogin and check your record at https://vaccinationcentre.com")),l=e.startsWith("+92")?e:"+92"+e.replace(/^0/,"");n=o.platform.is("android")||o.platform.is("ios")?"whatsapp://send?phone=".concat(l,"&text=").concat(a):"https://web.whatsapp.com/send?phone=".concat(l,"&text=").concat(a),window.open(n,"_system")}else console.error("API Response Error: No doses available or ResponseData is undefined.",t)}),(function(e){console.error("Error fetching doses:",e)})),r.isMessageSent=!0)}},{key:"formatDateToString",value:function(e){var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(("0"+(t.getMonth()+1)).slice(-2),"-").concat(("0"+t.getDate()).slice(-2))}},{key:"onDateChange",value:function(e){this.selectedDate=e.value,console.log("Selected Date:",this.selectedDate),this.getAlerts(this.selectedDate)}},{key:"getAlerts",value:function(e){var t=this.formatDateToString(e);this.getChlid(0,t)}}])}(),D=_createClass((function e(){_classCallCheck(this,e)})),S=n("pMnS"),w=n("t68o"),k=n("zbXB"),_=n("MKJQ"),x=n("sZkV"),C=n("iInd"),E=n("SVse"),I=n("HsOI"),P=n("ZwOa"),O=n("s7LF"),N=n("821u"),R=n("Xd0L"),A=n("/HVE"),M=n("oapL"),L=n("s6ns"),j=n("QQfA"),B=n("IP0z"),T=n("xgBC"),q=o.pb({encapsulation:2,styles:[],data:{}});function F(e){return o.Nb(0,[(e()(),o.rb(0,0,null,null,1,"h1",[["style","color: red;"]],null,null,null,null,null)),(e()(),o.Lb(-1,null,["No alert found"]))],null,null)}function G(e){return o.Nb(0,[(e()(),o.rb(0,0,null,null,11,"ion-item",[],null,null,null,_.xb,_.y)),o.qb(1,49152,null,0,x.H,[o.h,o.k,o.x],null,null),(e()(),o.rb(2,0,null,0,5,"ion-label",[["style","cursor: pointer;"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==o.Db(e,4).onClick()&&r),"click"===t&&(r=!1!==o.Db(e,6).onClick(n)&&r),r}),_.yb,_.z)),o.qb(3,49152,null,0,x.N,[o.h,o.k,o.x],null,null),o.qb(4,16384,null,0,C.o,[C.n,C.a,[8,null],o.C,o.k],{routerLink:[0,"routerLink"]},null),o.Eb(5,2),o.qb(6,737280,null,0,x.Kb,[E.j,x.Fb,o.k,C.n,[2,C.o]],null,null),(e()(),o.Lb(7,0,["",""])),(e()(),o.rb(8,0,null,0,1,"ion-icon",[["color","primary"],["name","mail"],["slot","end"],["style","cursor: pointer;"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.sendemail([e.context.$implicit])&&r),r}),_.sb,_.t)),o.qb(9,49152,null,0,x.C,[o.h,o.k,o.x],{color:[0,"color"],name:[1,"name"]},null),(e()(),o.rb(10,0,null,0,1,"ion-icon",[["name","logo-whatsapp"],["slot","end"],["style","cursor: pointer;"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.openWhatsApp(e.context.$implicit.Child.User.MobileNumber,e.context.$implicit.Child.Name,e.context.$implicit.Dose.Name,e.context.$implicit)&&r),r}),_.sb,_.t)),o.qb(11,49152,null,0,x.C,[o.h,o.k,o.x],{color:[0,"color"],name:[1,"name"]},null)],(function(e,t){var n=e(t,5,0,"/members/child/vaccine",t.context.$implicit.Child.Id);e(t,4,0,n),e(t,6,0),e(t,9,0,"primary","mail"),e(t,11,0,t.context.$implicit.isMessageSent?"primary":"success","logo-whatsapp")}),(function(e,t){e(t,7,0,t.context.$implicit.Child.Name)}))}function V(e){return o.Nb(0,[(e()(),o.rb(0,0,null,null,42,"ion-content",[["class","ion-padding"]],null,null,null,_.mb,_.n)),o.qb(1,49152,null,0,x.u,[o.h,o.k,o.x],null,null),(e()(),o.rb(2,0,null,0,30,"ion-toolbar",[],null,null,null,_.Xb,_.Y)),o.qb(3,49152,null,0,x.zb,[o.h,o.k,o.x],null,null),(e()(),o.rb(4,0,null,0,7,"ion-buttons",[["slot","start"]],null,null,null,_.eb,_.f)),o.qb(5,49152,null,0,x.l,[o.h,o.k,o.x],null,null),(e()(),o.rb(6,0,null,0,2,"ion-button",[["color","primary"],["fill","outline"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.sendemails()&&r),r}),_.db,_.e)),o.qb(7,49152,null,0,x.k,[o.h,o.k,o.x],{color:[0,"color"],disabled:[1,"disabled"],fill:[2,"fill"]},null),(e()(),o.Lb(-1,0,["Email"])),(e()(),o.rb(9,0,null,0,2,"ion-button",[["color","primary"],["fill","outline"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.downloadcsv()&&r),r}),_.db,_.e)),o.qb(10,49152,null,0,x.k,[o.h,o.k,o.x],{color:[0,"color"],disabled:[1,"disabled"],fill:[2,"fill"]},null),(e()(),o.Lb(-1,0,["Sheet"])),(e()(),o.rb(12,0,null,0,20,"ion-buttons",[["slot","end"]],null,null,null,_.eb,_.f)),o.qb(13,49152,null,0,x.l,[o.h,o.k,o.x],null,null),(e()(),o.rb(14,0,null,0,18,"ion-item",[],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==o.Db(e,32).open()&&r),r}),_.xb,_.y)),o.qb(15,49152,null,0,x.H,[o.h,o.k,o.x],null,null),(e()(),o.rb(16,0,null,0,10,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""]],[[1,"aria-haspopup",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"dateChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"focus"]],(function(e,t,n){var r=!0,i=e.component;return"input"===t&&(r=!1!==o.Db(e,18)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==o.Db(e,18).onTouched()&&r),"compositionstart"===t&&(r=!1!==o.Db(e,18)._compositionStart()&&r),"compositionend"===t&&(r=!1!==o.Db(e,18)._compositionEnd(n.target.value)&&r),"input"===t&&(r=!1!==o.Db(e,19)._onInput(n.target.value)&&r),"change"===t&&(r=!1!==o.Db(e,19)._onChange()&&r),"blur"===t&&(r=!1!==o.Db(e,19)._onBlur()&&r),"keydown"===t&&(r=!1!==o.Db(e,19)._onKeydown(n)&&r),"blur"===t&&(r=!1!==o.Db(e,26)._focusChanged(!1)&&r),"focus"===t&&(r=!1!==o.Db(e,26)._focusChanged(!0)&&r),"input"===t&&(r=!1!==o.Db(e,26)._onInput()&&r),"ngModelChange"===t&&(r=!1!==(i.selectedDate=n)&&r),"dateChange"===t&&(r=!1!==i.onDateChange(n)&&r),r}),null,null)),o.Ib(6144,null,I.c,null,[P.b]),o.qb(18,16384,null,0,O.c,[o.C,o.k,[2,O.a]],null,null),o.qb(19,147456,null,0,N.h,[o.k,[2,R.a],[2,R.d],[2,I.b]],{matDatepicker:[0,"matDatepicker"]},{dateChange:"dateChange"}),o.Ib(1024,null,O.m,(function(e){return[e]}),[N.h]),o.Ib(1024,null,O.n,(function(e,t){return[e,t]}),[O.c,N.h]),o.qb(22,671744,null,0,O.s,[[8,null],[6,O.m],[8,null],[6,O.n]],{model:[0,"model"]},{update:"ngModelChange"}),o.Ib(2048,null,O.o,null,[O.s]),o.qb(24,16384,null,0,O.p,[[4,O.o]],null,null),o.Ib(2048,null,P.a,null,[N.h]),o.qb(26,999424,null,0,P.b,[o.k,A.a,[6,O.o],[2,O.r],[2,O.j],R.b,[6,P.a],M.a,o.x],null,null),(e()(),o.rb(27,0,null,0,3,"mat-datepicker-toggle",[["class","mat-datepicker-toggle"],["matSuffix",""]],[[1,"tabindex",0],[2,"mat-datepicker-toggle-active",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"focus"]],(function(e,t,n){var r=!0;return"focus"===t&&(r=!1!==o.Db(e,28)._button.focus()&&r),r}),k.e,k.d)),o.qb(28,1753088,null,1,N.k,[N.i,o.h,[8,null]],{datepicker:[0,"datepicker"]},null),o.Jb(603979776,1,{_customIcon:0}),o.qb(30,16384,null,0,I.e,[],null,null),(e()(),o.rb(31,16777216,null,0,1,"mat-datepicker",[],null,null,null,k.f,k.c)),o.qb(32,180224,[["picker",4]],0,N.f,[L.d,j.a,o.x,o.N,N.a,[2,R.a],[2,B.b],[2,E.d]],null,null),(e()(),o.gb(16777216,null,0,1,null,F)),o.qb(34,16384,null,0,E.m,[o.N,o.K],{ngIf:[0,"ngIf"]},null),(e()(),o.rb(35,0,null,0,7,"ion-grid",[],null,null,null,_.qb,_.r)),o.qb(36,49152,null,0,x.A,[o.h,o.k,o.x],null,null),(e()(),o.rb(37,0,null,0,5,"ion-row",[],null,null,null,_.Jb,_.K)),o.qb(38,49152,null,0,x.gb,[o.h,o.k,o.x],null,null),(e()(),o.rb(39,0,null,0,3,"ion-col",[],null,null,null,_.lb,_.m)),o.qb(40,49152,null,0,x.t,[o.h,o.k,o.x],null,null),(e()(),o.gb(16777216,null,0,1,null,G)),o.qb(42,278528,null,0,E.l,[o.N,o.K,o.q],{ngForOf:[0,"ngForOf"]},null)],(function(e,t){var n=t.component;e(t,7,0,"primary",0==n.Childs,"outline"),e(t,10,0,"primary",0==n.Childs,"outline"),e(t,19,0,o.Db(t,32)),e(t,22,0,n.selectedDate),e(t,26,0),e(t,28,0,o.Db(t,32)),e(t,34,0,0==n.Childs),e(t,42,0,n.Childs)}),(function(e,t){e(t,16,1,[o.Db(t,19)._datepicker?"dialog":null,(null==o.Db(t,19)._datepicker?null:o.Db(t,19)._datepicker.opened)&&o.Db(t,19)._datepicker.id||null,o.Db(t,19).min?o.Db(t,19)._dateAdapter.toIso8601(o.Db(t,19).min):null,o.Db(t,19).max?o.Db(t,19)._dateAdapter.toIso8601(o.Db(t,19).max):null,o.Db(t,19).disabled,o.Db(t,24).ngClassUntouched,o.Db(t,24).ngClassTouched,o.Db(t,24).ngClassPristine,o.Db(t,24).ngClassDirty,o.Db(t,24).ngClassValid,o.Db(t,24).ngClassInvalid,o.Db(t,24).ngClassPending,o.Db(t,26)._isServer,o.Db(t,26).id,o.Db(t,26).placeholder,o.Db(t,26).disabled,o.Db(t,26).required,o.Db(t,26).readonly&&!o.Db(t,26)._isNativeSelect||null,o.Db(t,26)._ariaDescribedby||null,o.Db(t,26).errorState,o.Db(t,26).required.toString()]),e(t,27,0,-1,o.Db(t,28).datepicker&&o.Db(t,28).datepicker.opened,o.Db(t,28).datepicker&&"accent"===o.Db(t,28).datepicker.color,o.Db(t,28).datepicker&&"warn"===o.Db(t,28).datepicker.color)}))}var z=o.nb("app-vaccine-alert",y,(function(e){return o.Nb(0,[(e()(),o.rb(0,0,null,null,2,"app-vaccine-alert",[],null,null,null,V,q)),o.Ib(512,null,f.a,f.a,[]),o.qb(2,114688,null,0,y,[x.Db,h,m.a,d.a,T.b,f.a,p.a,E.u,b.a,g.a,x.Hb,v.a],null,null)],(function(e,t){e(t,2,0)}),null)}),{},{},[]),K=n("POq0"),U=n("cUpR"),J=n("Fwaw"),$=n("zMNK"),Y=n("hOhj"),H=n("5GAg");n.d(t,"VaccineAlertPageModuleNgFactory",(function(){return W}));var W=o.ob(D,[],(function(e){return o.Ab([o.Bb(512,o.j,o.Z,[[8,[S.a,w.a,k.b,k.a,z]],[3,o.j],o.v]),o.Bb(4608,E.o,E.n,[o.s,[2,E.D]]),o.Bb(4608,O.y,O.y,[]),o.Bb(4608,x.b,x.b,[o.x,o.g]),o.Bb(4608,x.Eb,x.Eb,[x.b,o.j,o.p]),o.Bb(4608,x.Ib,x.Ib,[x.b,o.j,o.p]),o.Bb(4608,j.a,j.a,[j.g,j.c,o.j,j.f,j.d,o.p,o.x,E.d,B.b,[2,E.i]]),o.Bb(5120,j.h,j.i,[j.a]),o.Bb(5120,L.b,L.c,[j.a]),o.Bb(135680,L.d,L.d,[j.a,o.p,[2,E.i],[2,L.a],L.b,[3,L.d],j.c]),o.Bb(4608,K.c,K.c,[]),o.Bb(4608,N.i,N.i,[]),o.Bb(5120,N.a,N.b,[j.a]),o.Bb(4608,R.b,R.b,[]),o.Bb(4608,R.a,R.u,[[2,R.e],A.a]),o.Bb(4608,g.a,g.a,[]),o.Bb(1073742336,E.b,E.b,[]),o.Bb(1073742336,O.x,O.x,[]),o.Bb(1073742336,O.l,O.l,[]),o.Bb(1073742336,x.Bb,x.Bb,[]),o.Bb(1073742336,C.q,C.q,[[2,C.v],[2,C.n]]),o.Bb(1073742336,B.a,B.a,[]),o.Bb(1073742336,R.j,R.j,[[2,R.c],[2,U.f]]),o.Bb(1073742336,A.b,A.b,[]),o.Bb(1073742336,R.t,R.t,[]),o.Bb(1073742336,J.c,J.c,[]),o.Bb(1073742336,$.f,$.f,[]),o.Bb(1073742336,Y.b,Y.b,[]),o.Bb(1073742336,j.e,j.e,[]),o.Bb(1073742336,L.g,L.g,[]),o.Bb(1073742336,K.d,K.d,[]),o.Bb(1073742336,H.a,H.a,[]),o.Bb(1073742336,N.j,N.j,[]),o.Bb(1073742336,M.c,M.c,[]),o.Bb(1073742336,I.d,I.d,[]),o.Bb(1073742336,P.c,P.c,[]),o.Bb(1073742336,R.v,R.v,[]),o.Bb(1073742336,R.l,R.l,[]),o.Bb(1073742336,D,D,[]),o.Bb(256,R.d,R.g,[]),o.Bb(1024,C.l,(function(){return[[{path:"",component:y}]]}),[])])}))}}]);