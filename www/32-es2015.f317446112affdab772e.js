(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{O7bJ:function(l,n,t){"use strict";t.r(n);var u=t("8Y7J"),e=t("mrSG"),i=t("f570"),o=t("UXh4"),s=t("s7LF"),a=t("AytR"),r=t("Tw+x");class b{constructor(l,n,t,u,e,i,o,s,r,b){this.loadingController=l,this.activatedRoute=n,this.router=t,this.formBuilder=u,this.bulkService=e,this.toastService=i,this.storage=o,this.alertController=s,this.downloader=r,this.platform=b,this.consultationfee=0,this.API_VACCINE=""+a.a.BASE_URL,this.BrandIds=[],this.bulk={Amount:""},this.isValidInput=!0}hasActiveValidations(){return this.fg.get("ConsultationFee").invalid&&(this.fg.get("ConsultationFee").dirty||this.fg.get("ConsultationFee").touched)||this.bulkData&&Array.isArray(this.bulkData)&&this.bulkData.some(l=>isNaN(Number(l.Amount)))}validateInput(l){this.isValidInput=/^\d*$/.test(l.target.value)}ngOnInit(){this.storage.get(a.a.DOCTOR_Id).then(l=>{this.doctorId=l}),this.childId=this.activatedRoute.snapshot.paramMap.get("id"),this.currentDate=this.activatedRoute.snapshot.paramMap.get("childId"),this.currentDate1=new Date(this.currentDate),this.getBulk(),this.fg=this.formBuilder.group({IsConsultationFee:!1,ConsultationFee:[null,s.w.pattern("^[0-9]*$")]}),this.storage.get(a.a.ON_CLINIC).then(l=>{this.fg.controls.ConsultationFee.setValue(l.ConsultationFee)})}getBulk(){return e.a(this,void 0,void 0,(function*(){let l={ChildId:this.childId,Date:this.currentDate1};const n=yield this.loadingController.create({message:"Loading"});yield n.present(),yield this.bulkService.getBulk(l).subscribe(l=>{l.IsSuccess?this.bulkData=l.ResponseData.filter(l=>1==l.IsDone):this.toastService.create(l.Message,"danger"),n.dismiss()},l=>{n.dismiss(),this.toastService.create(l,"danger")})}))}onSubmit(){let l=[];this.bulkData.forEach(n=>{l.push({Id:n.Id,Amount:n.Amount})}),this.fillVaccine(l)}fillVaccine(l){return e.a(this,void 0,void 0,(function*(){const n=yield this.loadingController.create({message:"Loading"});yield n.present(),yield this.bulkService.updateVaccineInvoice(l).subscribe(l=>{l.IsSuccess?(this.toastService.create("Successfully Updated"),this.router.navigate(["/members/child/vaccine/"+this.childId]),n.dismiss()):(n.dismiss(),this.toastService.create(l.Message,"danger"))},l=>{n.dismiss(),this.toastService.create(l,"danger")})}))}saveanddownload(){return e.a(this,void 0,void 0,(function*(){this.consultationfee=this.fg.value.IsConsultationFee?this.fg.value.ConsultationFee:0;let l=[];this.bulkData.forEach(n=>{l.push({Id:n.Id,Amount:n.Amount})});const n=yield this.loadingController.create({message:"Loading"});yield n.present(),this.bulkService.updateVaccineInvoice(l).subscribe(l=>{l.IsSuccess?(n.dismiss(),this.download(this.childId,this.currentDate,this.consultationfee)):(n.dismiss(),this.toastService.create(l.Message,"danger"))},l=>{n.dismiss(),this.toastService.create(l,"danger")})}))}download(l,n,t){const u=new Date(n),e=`${u.getFullYear()}-${(u.getMonth()+1).toString().padStart(2,"0")}-${u.getDate().toString().padStart(2,"0")}`;this.platform.is("desktop")||this.platform.is("mobileweb")?window.open(`${this.API_VACCINE}child/${l}/${e}/${e}/${t}/Verify-Invoice-PDF`):this.downloader.download({uri:`${this.API_VACCINE}child/${l}/${e}/${t}/Download-Invoice-PDF`,title:"Invoice",description:"",mimeType:"",visibleInDownloadsUi:!0,notificationVisibility:r.b.VisibleNotifyCompleted,destinationInExternalFilesDir:{dirType:"Downloads",subPath:"Invoice.pdf"}}).then(l=>console.log("File downloaded at:"+l)).catch(l=>console.error(l))}}class d{}var c=t("pMnS"),g=t("MKJQ"),h=t("sZkV"),p=t("SVse"),m=t("iInd"),C=t("xgBC"),v=u.pb({encapsulation:0,styles:[[""]],data:{}});function D(l){return u.Nb(0,[(l()(),u.rb(0,0,null,null,2,"ion-select-option",[["selected",""]],null,null,null,g.Mb,g.O)),u.qb(1,49152,null,0,h.lb,[u.h,u.k,u.x],{value:[0,"value"]},null),(l()(),u.Lb(2,0,[""," "]))],(function(l,n){l(n,1,0,n.context.$implicit.Id)}),(function(l,n){l(n,2,0,n.context.$implicit.Name)}))}function f(l){return u.Nb(0,[(l()(),u.rb(0,0,null,null,1,"div",[["style","color: red;"]],null,null,null,null,null)),(l()(),u.Lb(-1,null,["Please enter only numbers."]))],null,null)}function I(l){return u.Nb(0,[(l()(),u.rb(0,0,null,null,34,"ion-card",[],null,null,null,g.jb,g.g)),u.qb(1,49152,null,0,h.m,[u.h,u.k,u.x],null,null),(l()(),u.rb(2,0,null,0,4,"ion-item",[],null,null,null,g.xb,g.y)),u.qb(3,49152,null,0,h.H,[u.h,u.k,u.x],null,null),(l()(),u.rb(4,0,null,0,1,"b",[["style","padding-right:10%"]],null,null,null,null,null)),(l()(),u.Lb(-1,null,["vaccine:"])),(l()(),u.Lb(6,0,[" "," "])),(l()(),u.rb(7,0,null,0,13,"ion-item",[],null,null,null,g.xb,g.y)),u.qb(8,49152,null,0,h.H,[u.h,u.k,u.x],null,null),(l()(),u.rb(9,0,null,0,1,"b",[["style","padding-right:10%"]],null,null,null,null,null)),(l()(),u.Lb(-1,null,["brand"])),(l()(),u.rb(11,0,null,0,9,"ion-select",[["disabled",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,t){var e=!0;return"ionBlur"===n&&(e=!1!==u.Db(l,12)._handleBlurEvent(t.target)&&e),"ionChange"===n&&(e=!1!==u.Db(l,12)._handleChangeEvent(t.target)&&e),"ngModelChange"===n&&(e=!1!==(l.context.$implicit.BrandId=t)&&e),e}),g.Nb,g.N)),u.qb(12,4341760,null,0,h.Lb,[u.p,u.k],null,null),u.Ib(1024,null,s.n,(function(l){return[l]}),[h.Lb]),u.qb(14,671744,null,0,s.s,[[2,s.b],[8,null],[8,null],[6,s.n]],{isDisabled:[0,"isDisabled"],model:[1,"model"],options:[2,"options"]},{update:"ngModelChange"}),u.Gb(15,{standalone:0}),u.Ib(2048,null,s.o,null,[s.s]),u.qb(17,16384,null,0,s.p,[[4,s.o]],null,null),u.qb(18,49152,null,0,h.kb,[u.h,u.k,u.x],{disabled:[0,"disabled"]},null),(l()(),u.gb(16777216,null,0,1,null,D)),u.qb(20,278528,null,0,p.l,[u.N,u.K,u.q],{ngForOf:[0,"ngForOf"]},null),(l()(),u.rb(21,0,null,0,13,"ion-item",[],null,null,null,g.xb,g.y)),u.qb(22,49152,null,0,h.H,[u.h,u.k,u.x],null,null),(l()(),u.rb(23,0,null,0,1,"b",[["style","padding-right:10%"]],null,null,null,null,null)),(l()(),u.Lb(-1,null,["Amount"])),(l()(),u.rb(25,0,null,0,7,"ion-input",[["placeholder","Enter Amount"],["position","end"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,t){var e=!0,i=l.component;return"ionBlur"===n&&(e=!1!==u.Db(l,26)._handleBlurEvent(t.target)&&e),"ionChange"===n&&(e=!1!==u.Db(l,26)._handleInputEvent(t.target)&&e),"ngModelChange"===n&&(e=!1!==(l.context.$implicit.Amount=t)&&e),"input"===n&&(e=!1!==i.validateInput(t)&&e),e}),g.wb,g.x)),u.qb(26,4341760,null,0,h.Mb,[u.p,u.k],null,null),u.Ib(1024,null,s.n,(function(l){return[l]}),[h.Mb]),u.qb(28,671744,null,0,s.s,[[2,s.b],[8,null],[8,null],[6,s.n]],{model:[0,"model"],options:[1,"options"]},{update:"ngModelChange"}),u.Gb(29,{standalone:0}),u.Ib(2048,null,s.o,null,[s.s]),u.qb(31,16384,null,0,s.p,[[4,s.o]],null,null),u.qb(32,49152,null,0,h.G,[u.h,u.k,u.x],{placeholder:[0,"placeholder"],type:[1,"type"]},null),(l()(),u.gb(16777216,null,0,1,null,f)),u.qb(34,16384,null,0,p.m,[u.N,u.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component,u=n.context.$implicit.BrandId,e=l(n,15,0,!0);l(n,14,0,"",u,e),l(n,18,0,""),l(n,20,0,n.context.$implicit.Brands);var i=n.context.$implicit.Amount,o=l(n,29,0,!0);l(n,28,0,i,o),l(n,32,0,"Enter Amount","text"),l(n,34,0,!t.isValidInput)}),(function(l,n){l(n,6,0,n.context.$implicit.Dose.Name),l(n,11,0,u.Db(n,17).ngClassUntouched,u.Db(n,17).ngClassTouched,u.Db(n,17).ngClassPristine,u.Db(n,17).ngClassDirty,u.Db(n,17).ngClassValid,u.Db(n,17).ngClassInvalid,u.Db(n,17).ngClassPending),l(n,25,0,u.Db(n,31).ngClassUntouched,u.Db(n,31).ngClassTouched,u.Db(n,31).ngClassPristine,u.Db(n,31).ngClassDirty,u.Db(n,31).ngClassValid,u.Db(n,31).ngClassInvalid,u.Db(n,31).ngClassPending)}))}function k(l){return u.Nb(0,[(l()(),u.rb(0,0,null,null,3,"div",[],null,null,null,null,null)),(l()(),u.rb(1,0,null,null,2,"ion-text",[["color","danger"]],null,null,null,g.Sb,g.T)),u.qb(2,49152,null,0,h.ub,[u.h,u.k,u.x],{color:[0,"color"]},null),(l()(),u.Lb(-1,0,["Please enter only numbers."]))],(function(l,n){l(n,2,0,"danger")}),null)}function y(l){return u.Nb(0,[(l()(),u.rb(0,0,null,null,11,"ion-header",[],null,null,null,g.rb,g.s)),u.qb(1,49152,null,0,h.B,[u.h,u.k,u.x],null,null),(l()(),u.rb(2,0,null,0,9,"ion-toolbar",[["color","primary"]],null,null,null,g.Xb,g.Y)),u.qb(3,49152,null,0,h.zb,[u.h,u.k,u.x],{color:[0,"color"]},null),(l()(),u.rb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,g.eb,g.f)),u.qb(5,49152,null,0,h.l,[u.h,u.k,u.x],null,null),(l()(),u.rb(6,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==u.Db(l,8).onClick(t)&&e),e}),g.bb,g.c)),u.qb(7,49152,null,0,h.g,[u.h,u.k,u.x],null,null),u.qb(8,16384,null,0,h.h,[[2,h.fb],h.Fb,h.d],null,null),(l()(),u.rb(9,0,null,0,2,"ion-title",[],null,null,null,g.Vb,g.W)),u.qb(10,49152,null,0,h.xb,[u.h,u.k,u.x],null,null),(l()(),u.Lb(-1,0,["Invoice"])),(l()(),u.rb(12,0,null,null,31,"ion-content",[],null,null,null,g.mb,g.n)),u.qb(13,49152,null,0,h.u,[u.h,u.k,u.x],null,null),(l()(),u.rb(14,0,null,0,29,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,t){var e=!0,i=l.component;return"submit"===n&&(e=!1!==u.Db(l,16).onSubmit(t)&&e),"reset"===n&&(e=!1!==u.Db(l,16).onReset()&&e),"ngSubmit"===n&&(e=!1!==i.onSubmit()&&e),e}),null,null)),u.qb(15,16384,null,0,s.A,[],null,null),u.qb(16,540672,null,0,s.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),u.Ib(2048,null,s.b,null,[s.j]),u.qb(18,16384,null,0,s.q,[[4,s.b]],null,null),(l()(),u.gb(16777216,null,null,1,null,I)),u.qb(20,278528,null,0,p.l,[u.N,u.K,u.q],{ngForOf:[0,"ngForOf"]},null),(l()(),u.rb(21,0,null,null,19,"ion-item",[["style","padding:10px 0 10px"]],null,null,null,g.xb,g.y)),u.qb(22,49152,null,0,h.H,[u.h,u.k,u.x],null,null),(l()(),u.rb(23,0,null,0,1,"b",[["style","padding-right:10%"]],null,null,null,null,null)),(l()(),u.Lb(-1,null,["Consultation Fee"])),(l()(),u.rb(25,0,null,0,6,"ion-input",[["formControlName","ConsultationFee"],["placeholder","Enter Amount"],["position","end"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,t){var e=!0;return"ionBlur"===n&&(e=!1!==u.Db(l,26)._handleBlurEvent(t.target)&&e),"ionChange"===n&&(e=!1!==u.Db(l,26)._handleInputEvent(t.target)&&e),e}),g.wb,g.x)),u.qb(26,4341760,null,0,h.Mb,[u.p,u.k],null,null),u.Ib(1024,null,s.n,(function(l){return[l]}),[h.Mb]),u.qb(28,671744,null,0,s.h,[[3,s.b],[8,null],[8,null],[6,s.n],[2,s.z]],{name:[0,"name"]},null),u.Ib(2048,null,s.o,null,[s.h]),u.qb(30,16384,null,0,s.p,[[4,s.o]],null,null),u.qb(31,49152,null,0,h.G,[u.h,u.k,u.x],{placeholder:[0,"placeholder"],type:[1,"type"]},null),(l()(),u.gb(16777216,null,0,1,null,k)),u.qb(33,16384,null,0,p.m,[u.N,u.K],{ngIf:[0,"ngIf"]},null),(l()(),u.rb(34,0,null,0,6,"ion-checkbox",[["formControlName","IsConsultationFee"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,t){var e=!0;return"ionBlur"===n&&(e=!1!==u.Db(l,35)._handleBlurEvent(t.target)&&e),"ionChange"===n&&(e=!1!==u.Db(l,35)._handleIonChange(t.target)&&e),e}),g.kb,g.l)),u.qb(35,4341760,null,0,h.c,[u.p,u.k],null,null),u.Ib(1024,null,s.n,(function(l){return[l]}),[h.c]),u.qb(37,671744,null,0,s.h,[[3,s.b],[8,null],[8,null],[6,s.n],[2,s.z]],{name:[0,"name"]},null),u.Ib(2048,null,s.o,null,[s.h]),u.qb(39,16384,null,0,s.p,[[4,s.o]],null,null),u.qb(40,49152,null,0,h.r,[u.h,u.k,u.x],null,null),(l()(),u.rb(41,0,null,null,2,"ion-button",[],null,[[null,"click"]],(function(l,n,t){var u=!0;return"click"===n&&(u=!1!==l.component.saveanddownload()&&u),u}),g.db,g.e)),u.qb(42,49152,null,0,h.k,[u.h,u.k,u.x],{disabled:[0,"disabled"]},null),(l()(),u.Lb(-1,0,["Download"]))],(function(l,n){var t=n.component;l(n,3,0,"primary"),l(n,16,0,t.fg),l(n,20,0,t.bulkData),l(n,28,0,"ConsultationFee"),l(n,31,0,"Enter Amount","text"),l(n,33,0,t.fg.get("ConsultationFee").hasError("invalidNumber")&&(t.fg.get("ConsultationFee").dirty||t.fg.get("ConsultationFee").touched)),l(n,37,0,"IsConsultationFee"),l(n,42,0,t.hasActiveValidations())}),(function(l,n){l(n,14,0,u.Db(n,18).ngClassUntouched,u.Db(n,18).ngClassTouched,u.Db(n,18).ngClassPristine,u.Db(n,18).ngClassDirty,u.Db(n,18).ngClassValid,u.Db(n,18).ngClassInvalid,u.Db(n,18).ngClassPending),l(n,25,0,u.Db(n,30).ngClassUntouched,u.Db(n,30).ngClassTouched,u.Db(n,30).ngClassPristine,u.Db(n,30).ngClassDirty,u.Db(n,30).ngClassValid,u.Db(n,30).ngClassInvalid,u.Db(n,30).ngClassPending),l(n,34,0,u.Db(n,39).ngClassUntouched,u.Db(n,39).ngClassTouched,u.Db(n,39).ngClassPristine,u.Db(n,39).ngClassDirty,u.Db(n,39).ngClassValid,u.Db(n,39).ngClassInvalid,u.Db(n,39).ngClassPending)}))}function x(l){return u.Nb(0,[(l()(),u.rb(0,0,null,null,1,"app-bulk",[],null,null,null,y,v)),u.qb(1,114688,null,0,b,[h.Db,m.a,m.n,s.f,i.a,o.a,C.b,h.a,r.a,h.Hb],null,null)],(function(l,n){l(n,1,0)}),null)}var q=u.nb("app-bulk",b,x,{},{},[]);t.d(n,"BulkInvoicePageModuleNgFactory",(function(){return B}));var B=u.ob(d,[],(function(l){return u.Ab([u.Bb(512,u.j,u.Z,[[8,[c.a,q]],[3,u.j],u.v]),u.Bb(4608,p.o,p.n,[u.s,[2,p.D]]),u.Bb(4608,s.y,s.y,[]),u.Bb(4608,h.b,h.b,[u.x,u.g]),u.Bb(4608,h.Eb,h.Eb,[h.b,u.j,u.p]),u.Bb(4608,h.Ib,h.Ib,[h.b,u.j,u.p]),u.Bb(4608,s.f,s.f,[]),u.Bb(4608,r.a,r.a,[]),u.Bb(1073742336,p.b,p.b,[]),u.Bb(1073742336,s.x,s.x,[]),u.Bb(1073742336,s.l,s.l,[]),u.Bb(1073742336,h.Bb,h.Bb,[]),u.Bb(1073742336,m.q,m.q,[[2,m.v],[2,m.n]]),u.Bb(1073742336,s.u,s.u,[]),u.Bb(1073742336,d,d,[]),u.Bb(1024,m.l,(function(){return[[{path:"",component:b}]]}),[])])}))}}]);