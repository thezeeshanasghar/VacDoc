(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"474j":function(l,n,e){"use strict";e.r(n);var i=e("8Y7J"),t=e("mrSG"),u=e("S4pr"),r=e("UXh4"),o=e("AytR"),s=e("8hSh"),c=e("GVh8"),a=e("XVzR");class b{constructor(l,n,e,i,t,u,r){this.loadingController=l,this.storage=n,this.brandService=e,this.toastService=i,this.clinicService=t,this.stockService=u,this.paService=r,this.brandAmounts=[],this.clinics=[]}ngOnInit(){return t.a(this,void 0,void 0,(function*(){try{if(this.doctorId=yield this.storage.get(o.a.DOCTOR_Id),this.clinicId=yield this.storage.get(o.a.CLINIC_Id),this.usertype=yield this.storage.get(o.a.USER),!this.doctorId||!this.usertype)return console.error("Doctor ID or User Type not found in storage."),void this.toastService.create("Failed to load user data","danger");console.log("Doctor ID:",this.doctorId),console.log("Clinic ID:",this.clinicId),console.log("User Type:",this.usertype),yield this.loadClinics()}catch(l){console.error("Error during initialization:",l),this.toastService.create("An unexpected error occurred","danger")}}))}loadClinics(){return t.a(this,void 0,void 0,(function*(){const l=yield this.loadingController.create({message:"Loading clinics..."});yield l.present();try{"DOCTOR"===this.usertype.UserType?this.clinicService.getClinics(Number(this.doctorId)).subscribe({next:n=>{l.dismiss(),n.IsSuccess?(this.clinics=n.ResponseData,console.log("Clinics:",this.clinics),this.selectedClinicId=this.clinicId||(this.clinics.length>0?this.clinics[0].Id:null),this.selectedClinicId&&this.getBill(this.selectedClinicId)):this.toastService.create(n.Message,"danger")},error:n=>{l.dismiss(),console.error("Error fetching clinics:",n),this.toastService.create("Failed to load clinics","danger")}}):"PA"===this.usertype.UserType&&this.paService.getPaClinics(Number(this.usertype.PAId)).subscribe({next:n=>{l.dismiss(),n.IsSuccess?(this.clinics=n.ResponseData,console.log("PA Clinics:",this.clinics),this.selectedClinicId=this.clinics.length>0?this.clinics[0].Id:null,this.selectedClinicId&&this.getBill(this.selectedClinicId)):this.toastService.create(n.Message,"danger")},error:n=>{l.dismiss(),console.error("Error fetching PA clinics:",n),this.toastService.create("Failed to load clinics","danger")}})}catch(n){l.dismiss(),console.error("Error in loadClinics:",n),this.toastService.create("An unexpected error occurred","danger")}}))}onClinicChange(l){const n=l.detail.value;console.log("Selected Clinic ID:",n),this.getBill(n)}getBill(l){return t.a(this,void 0,void 0,(function*(){const n=yield this.loadingController.create({message:"Loading bills..."});yield n.present(),this.stockService.getBills(Number(l)).subscribe({next:l=>{n.dismiss(),l.IsSuccess?(console.log("Bills:",l.ResponseData),this.data=l.ResponseData):this.toastService.create(l.Message||"Failed to fetch bills","danger")},error:l=>{n.dismiss(),console.error("Error fetching bills:",l),this.toastService.create("Failed to fetch bills","danger")}})}))}updateBrandAmount(){return t.a(this,void 0,void 0,(function*(){const l=yield this.loadingController.create({message:"Updating brand amounts..."});yield l.present(),this.brandService.putBrandAmount(this.brandAmounts).subscribe({next:n=>{l.dismiss(),n.IsSuccess?this.toastService.create("Successfully updated brand amounts","success"):this.toastService.create(n.Message,"danger")},error:n=>{l.dismiss(),console.error("Error updating brand amounts:",n),this.toastService.create("Failed to update brand amounts","danger")}})}))}approvePurchase(l){return t.a(this,void 0,void 0,(function*(){const n=yield this.loadingController.create({message:"Approving purchase..."});yield n.present(),this.stockService.patchIsApproved(l).subscribe({next:l=>{n.dismiss(),console.log("API Response:",l),this.toastService.create(l.message,"success"),this.getBill(l.schedule.ClinicId)},error:l=>{n.dismiss(),console.error("Error approving purchase:",l),this.toastService.create(l.error.message||"Failed to approve purchase","danger")}})}))}}const d=()=>Promise.all([e.e(1),e.e(3),e.e(6),e.e(54)]).then(e.bind(null,"P7Zp")).then(l=>l.AddPageModuleNgFactory),h=()=>e.e(56).then(e.bind(null,"btl9")).then(l=>l.BrandListPageModuleNgFactory),g=()=>Promise.all([e.e(1),e.e(3),e.e(6),e.e(55)]).then(e.bind(null,"dKjG")).then(l=>l.AdjustPageModuleNgFactory),p=()=>e.e(59).then(e.bind(null,"ZJnN")).then(l=>l.StockInHandPageModuleNgFactory),m=()=>Promise.all([e.e(1),e.e(3),e.e(57)]).then(e.bind(null,"pKA+")).then(l=>l.EditPageModuleNgFactory);class k{}var v=e("pMnS"),C=e("MKJQ"),y=e("sZkV"),f=e("iInd"),x=e("SVse"),q=e("s7LF"),I=e("xgBC"),S=i.pb({encapsulation:2,styles:[],data:{}});function D(l){return i.Nb(0,[(l()(),i.rb(0,0,null,null,2,"ion-select-option",[],null,null,null,C.Mb,C.O)),i.qb(1,49152,null,0,y.lb,[i.h,i.k,i.x],{value:[0,"value"]},null),(l()(),i.Lb(2,0,[" "," "]))],(function(l,n){l(n,1,0,n.context.$implicit.Id)}),(function(l,n){l(n,2,0,n.context.$implicit.Name)}))}function B(l){return i.Nb(0,[(l()(),i.rb(0,0,null,null,2,"ion-button",[["class","approve-button"],["color","success"]],null,[[null,"click"]],(function(l,n,e){var i=!0;return"click"===n&&(i=!1!==l.component.approvePurchase(l.parent.context.$implicit.Id)&&i),i}),C.db,C.e)),i.qb(1,49152,null,0,y.k,[i.h,i.k,i.x],{color:[0,"color"]},null),(l()(),i.Lb(-1,0,[" Approve "]))],(function(l,n){l(n,1,0,"success")}),null)}function L(l){return i.Nb(0,[(l()(),i.rb(0,0,null,null,41,"ion-col",[["size","12"],["size-md","4"],["size-sm","6"]],null,null,null,C.lb,C.m)),i.qb(1,49152,null,0,y.t,[i.h,i.k,i.x],{size:[0,"size"]},null),(l()(),i.rb(2,0,null,0,39,"ion-card",[["class","inventory-card"]],null,null,null,C.jb,C.g)),i.qb(3,49152,null,0,y.m,[i.h,i.k,i.x],null,null),(l()(),i.rb(4,0,null,0,13,"ion-card-header",[["class","card-header-with-button"],["color","primary"]],null,null,null,C.gb,C.i)),i.qb(5,49152,null,0,y.o,[i.h,i.k,i.x],{color:[0,"color"]},null),(l()(),i.rb(6,0,null,0,9,"ion-button",[["color","light"],["fill","clear"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==i.Db(l,8).onClick()&&t),"click"===n&&(t=!1!==i.Db(l,10).onClick(e)&&t),t}),C.db,C.e)),i.qb(7,49152,null,0,y.k,[i.h,i.k,i.x],{color:[0,"color"],fill:[1,"fill"]},null),i.qb(8,16384,null,0,f.o,[f.n,f.a,[8,null],i.C,i.k],{routerLink:[0,"routerLink"]},null),i.Eb(9,2),i.qb(10,737280,null,0,y.Kb,[x.j,y.Fb,i.k,f.n,[2,f.o]],null,null),(l()(),i.rb(11,0,null,0,2,"ion-card-title",[],null,null,null,C.ib,C.k)),i.qb(12,49152,null,0,y.q,[i.h,i.k,i.x],null,null),(l()(),i.Lb(13,0,["",""])),(l()(),i.rb(14,0,null,0,1,"ion-icon",[["name","arrow-forward"],["slot","icon-only"]],null,null,null,C.sb,C.t)),i.qb(15,49152,null,0,y.C,[i.h,i.k,i.x],{name:[0,"name"]},null),(l()(),i.gb(16777216,null,0,1,null,B)),i.qb(17,16384,null,0,x.m,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(l()(),i.rb(18,0,null,0,23,"ion-card-content",[],null,null,null,C.fb,C.h)),i.qb(19,49152,null,0,y.n,[i.h,i.k,i.x],null,null),(l()(),i.rb(20,0,null,0,21,"ion-list",[["lines","none"]],null,null,null,C.Ab,C.A)),i.qb(21,49152,null,0,y.O,[i.h,i.k,i.x],{lines:[0,"lines"]},null),(l()(),i.rb(22,0,null,0,8,"ion-item",[],null,null,null,C.xb,C.y)),i.qb(23,49152,null,0,y.H,[i.h,i.k,i.x],null,null),(l()(),i.rb(24,0,null,0,6,"ion-label",[],null,null,null,C.yb,C.z)),i.qb(25,49152,null,0,y.N,[i.h,i.k,i.x],null,null),(l()(),i.rb(26,0,null,0,1,"h3",[],null,null,null,null,null)),(l()(),i.Lb(-1,null,["Date"])),(l()(),i.rb(28,0,null,0,2,"p",[],null,null,null,null,null)),(l()(),i.Lb(29,null,["",""])),i.Hb(30,2),(l()(),i.rb(31,0,null,0,10,"ion-item",[],null,null,null,C.xb,C.y)),i.qb(32,49152,null,0,y.H,[i.h,i.k,i.x],null,null),(l()(),i.rb(33,0,null,0,5,"ion-label",[],null,null,null,C.yb,C.z)),i.qb(34,49152,null,0,y.N,[i.h,i.k,i.x],null,null),(l()(),i.rb(35,0,null,0,1,"h3",[],null,null,null,null,null)),(l()(),i.Lb(-1,null,["Supplier Name"])),(l()(),i.rb(37,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),i.Lb(38,null,["",""])),(l()(),i.rb(39,0,null,0,2,"ion-badge",[["slot","end"]],null,null,null,C.cb,C.d)),i.qb(40,49152,null,0,y.j,[i.h,i.k,i.x],{color:[0,"color"]},null),(l()(),i.Lb(41,0,[" "," "]))],(function(l,n){var e=n.component;l(n,1,0,"12"),l(n,5,0,"primary"),l(n,7,0,"light","clear");var i=l(n,9,0,"/members/doctor/stock-management/brandlist/",n.context.$implicit.Id);l(n,8,0,i),l(n,10,0),l(n,15,0,"arrow-forward"),l(n,17,0,"DOCTOR"===e.usertype&&!n.context.$implicit.IsPAApprove),l(n,21,0,"none"),l(n,40,0,n.context.$implicit.IsPaid?"success":"danger")}),(function(l,n){l(n,13,0,n.context.$implicit.BillNo);var e=i.Mb(n,29,0,l(n,30,0,i.Db(n.parent,0),n.context.$implicit.BillDate,"dd/MM/yyyy"));l(n,29,0,e),l(n,38,0,n.context.$implicit.Supplier?n.context.$implicit.Supplier:"not enter"),l(n,41,0,n.context.$implicit.IsPaid?"Paid":"Unpaid")}))}function N(l){return i.Nb(0,[i.Fb(0,x.e,[i.s]),(l()(),i.rb(1,0,null,null,26,"ion-header",[],null,null,null,C.rb,C.s)),i.qb(2,49152,null,0,y.B,[i.h,i.k,i.x],null,null),(l()(),i.rb(3,0,null,0,6,"ion-toolbar",[["color","primary"]],null,null,null,C.Xb,C.Y)),i.qb(4,49152,null,0,y.zb,[i.h,i.k,i.x],{color:[0,"color"]},null),(l()(),i.rb(5,0,null,0,1,"ion-buttons",[["slot","start"]],null,null,null,C.eb,C.f)),i.qb(6,49152,null,0,y.l,[i.h,i.k,i.x],null,null),(l()(),i.rb(7,0,null,0,2,"ion-title",[],null,null,null,C.Vb,C.W)),i.qb(8,49152,null,0,y.xb,[i.h,i.k,i.x],null,null),(l()(),i.Lb(-1,0,["Purchase Report"])),(l()(),i.rb(10,0,null,0,17,"ion-toolbar",[["color","primary"]],null,null,null,C.Xb,C.Y)),i.qb(11,49152,null,0,y.zb,[i.h,i.k,i.x],{color:[0,"color"]},null),(l()(),i.rb(12,0,null,0,15,"ion-buttons",[["class","ion-justify-content-center"],["style","border-radius: 5px;"]],null,null,null,C.eb,C.f)),i.qb(13,49152,null,0,y.l,[i.h,i.k,i.x],null,null),(l()(),i.rb(14,0,null,0,3,"ion-icon",[["name","bar-chart-outline"],["routerLink","/members/doctor/brand-amount"],["size","large"],["style","margin-left: 10%"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==i.Db(l,16).onClick()&&t),"click"===n&&(t=!1!==i.Db(l,17).onClick(e)&&t),t}),C.sb,C.t)),i.qb(15,49152,null,0,y.C,[i.h,i.k,i.x],{name:[0,"name"],size:[1,"size"]},null),i.qb(16,16384,null,0,f.o,[f.n,f.a,[8,null],i.C,i.k],{routerLink:[0,"routerLink"]},null),i.qb(17,737280,null,0,y.Kb,[x.j,y.Fb,i.k,f.n,[2,f.o]],null,null),(l()(),i.rb(18,0,null,0,3,"ion-icon",[["name","add-circle-outline"],["routerLink","/members/doctor/stock-management/add"],["size","large"],["style","margin-left: 10%"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==i.Db(l,20).onClick()&&t),"click"===n&&(t=!1!==i.Db(l,21).onClick(e)&&t),t}),C.sb,C.t)),i.qb(19,49152,null,0,y.C,[i.h,i.k,i.x],{name:[0,"name"],size:[1,"size"]},null),i.qb(20,16384,null,0,f.o,[f.n,f.a,[8,null],i.C,i.k],{routerLink:[0,"routerLink"]},null),i.qb(21,737280,null,0,y.Kb,[x.j,y.Fb,i.k,f.n,[2,f.o]],null,null),(l()(),i.rb(22,0,null,0,3,"ion-icon",[["name","sync-outline"],["routerLink","/members/doctor/stock-management/adjust"],["size","large"],["style","margin-left: 10%"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==i.Db(l,24).onClick()&&t),"click"===n&&(t=!1!==i.Db(l,25).onClick(e)&&t),t}),C.sb,C.t)),i.qb(23,49152,null,0,y.C,[i.h,i.k,i.x],{name:[0,"name"],size:[1,"size"]},null),i.qb(24,16384,null,0,f.o,[f.n,f.a,[8,null],i.C,i.k],{routerLink:[0,"routerLink"]},null),i.qb(25,737280,null,0,y.Kb,[x.j,y.Fb,i.k,f.n,[2,f.o]],null,null),(l()(),i.rb(26,0,null,0,1,"ion-menu-button",[["style","margin-left: 10%"]],null,null,null,C.Bb,C.D)),i.qb(27,49152,null,0,y.R,[i.h,i.k,i.x],null,null),(l()(),i.rb(28,0,null,null,21,"ion-content",[["class","ion-padding"]],null,null,null,C.mb,C.n)),i.qb(29,49152,null,0,y.u,[i.h,i.k,i.x],null,null),(l()(),i.rb(30,0,null,0,13,"ion-item",[],null,null,null,C.xb,C.y)),i.qb(31,49152,null,0,y.H,[i.h,i.k,i.x],null,null),(l()(),i.rb(32,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,C.yb,C.z)),i.qb(33,49152,null,0,y.N,[i.h,i.k,i.x],{position:[0,"position"]},null),(l()(),i.Lb(-1,0,["Select Clinic"])),(l()(),i.rb(35,0,null,0,8,"ion-select",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"ionBlur"]],(function(l,n,e){var t=!0,u=l.component;return"ionBlur"===n&&(t=!1!==i.Db(l,36)._handleBlurEvent(e.target)&&t),"ionChange"===n&&(t=!1!==i.Db(l,36)._handleChangeEvent(e.target)&&t),"ngModelChange"===n&&(t=!1!==(u.selectedClinicId=e)&&t),"ionChange"===n&&(t=!1!==u.onClinicChange(e)&&t),t}),C.Nb,C.N)),i.qb(36,4341760,null,0,y.Lb,[i.p,i.k],null,null),i.Ib(1024,null,q.n,(function(l){return[l]}),[y.Lb]),i.qb(38,671744,null,0,q.s,[[8,null],[8,null],[8,null],[6,q.n]],{model:[0,"model"]},{update:"ngModelChange"}),i.Ib(2048,null,q.o,null,[q.s]),i.qb(40,16384,null,0,q.p,[[4,q.o]],null,null),i.qb(41,49152,null,0,y.kb,[i.h,i.k,i.x],null,null),(l()(),i.gb(16777216,null,0,1,null,D)),i.qb(43,278528,null,0,x.l,[i.N,i.K,i.q],{ngForOf:[0,"ngForOf"]},null),(l()(),i.rb(44,0,null,0,5,"ion-grid",[],null,null,null,C.qb,C.r)),i.qb(45,49152,null,0,y.A,[i.h,i.k,i.x],null,null),(l()(),i.rb(46,0,null,0,3,"ion-row",[],null,null,null,C.Jb,C.K)),i.qb(47,49152,null,0,y.gb,[i.h,i.k,i.x],null,null),(l()(),i.gb(16777216,null,0,1,null,L)),i.qb(49,278528,null,0,x.l,[i.N,i.K,i.q],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var e=n.component;l(n,4,0,"primary"),l(n,11,0,"primary"),l(n,15,0,"bar-chart-outline","large"),l(n,16,0,"/members/doctor/brand-amount"),l(n,17,0),l(n,19,0,"add-circle-outline","large"),l(n,20,0,"/members/doctor/stock-management/add"),l(n,21,0),l(n,23,0,"sync-outline","large"),l(n,24,0,"/members/doctor/stock-management/adjust"),l(n,25,0),l(n,33,0,"floating"),l(n,38,0,e.selectedClinicId),l(n,43,0,e.clinics),l(n,49,0,e.data)}),(function(l,n){l(n,35,0,i.Db(n,40).ngClassUntouched,i.Db(n,40).ngClassTouched,i.Db(n,40).ngClassPristine,i.Db(n,40).ngClassDirty,i.Db(n,40).ngClassValid,i.Db(n,40).ngClassInvalid,i.Db(n,40).ngClassPending)}))}function P(l){return i.Nb(0,[(l()(),i.rb(0,0,null,null,1,"app-stock-management",[],null,null,null,N,S)),i.qb(1,114688,null,0,b,[y.Db,I.b,u.a,r.a,c.a,s.a,a.a],null,null)],(function(l,n){l(n,1,0)}),null)}var A=i.nb("app-stock-management",b,P,{},{},[]);e.d(n,"StockManagementPageModuleNgFactory",(function(){return F}));var F=i.ob(k,[],(function(l){return i.Ab([i.Bb(512,i.j,i.Z,[[8,[v.a,A]],[3,i.j],i.v]),i.Bb(4608,x.o,x.n,[i.s,[2,x.D]]),i.Bb(4608,q.y,q.y,[]),i.Bb(4608,y.b,y.b,[i.x,i.g]),i.Bb(4608,y.Eb,y.Eb,[y.b,i.j,i.p]),i.Bb(4608,y.Ib,y.Ib,[y.b,i.j,i.p]),i.Bb(4608,q.f,q.f,[]),i.Bb(1073742336,x.b,x.b,[]),i.Bb(1073742336,q.x,q.x,[]),i.Bb(1073742336,q.l,q.l,[]),i.Bb(1073742336,y.Bb,y.Bb,[]),i.Bb(1073742336,f.q,f.q,[[2,f.v],[2,f.n]]),i.Bb(1073742336,q.u,q.u,[]),i.Bb(1073742336,k,k,[]),i.Bb(1024,f.l,(function(){return[[{path:"",component:b},{path:"add",loadChildren:d},{path:"brandlist/:brandId",loadChildren:h},{path:"adjust",loadChildren:g},{path:"stockinhand",loadChildren:p},{path:"brandlist/edit/:brandId",loadChildren:m}]]}),[])])}))}}]);